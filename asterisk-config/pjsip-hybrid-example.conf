; ============================================
; Hybrid PJSIP Configuration Example
; External Softphones (SIP) + Browser WebRTC
; ============================================

; ============================================
; TRANSPORTS
; ============================================

; UDP Transport for regular SIP (external softphones)
[transport-udp]
type=transport
protocol=udp
bind=0.0.0.0:5066

; TCP Transport for regular SIP (external softphones)
[transport-tcp]
type=transport
protocol=tcp
bind=0.0.0.0:5066

; WebSocket Secure Transport for WebRTC (browser-based)
[transport-wss]
type=transport
protocol=wss
bind=0.0.0.0:8089

; ============================================
; REGULAR SIP ENDPOINTS (External Softphones)
; Keep your existing endpoints - these stay unchanged
; ============================================

[8013]
type=endpoint
context=from-internal
disallow=all
allow=ulaw
allow=alaw
aors=8013
auth=8013
callerid=Agent 8013 <8013>
transport=transport-udp

[8013]
type=auth
auth_type=userpass
password=password123
username=8013

[8013]
type=aor
max_contacts=1

[8014]
type=endpoint
context=from-internal
disallow=all
allow=ulaw
allow=alaw
aors=8014
auth=8014
callerid=Agent 8014 <8014>
transport=transport-udp

[8014]
type=auth
auth_type=userpass
password=password123
username=8014

[8014]
type=aor
max_contacts=1

; ============================================
; WEBRTC ENDPOINTS (Browser-Based Calling)
; NEW: Add these alongside existing endpoints
; ============================================

; WebRTC Endpoint for Agent 8013
[8013-webrtc]
type=endpoint
context=from-internal
disallow=all
allow=ulaw
allow=alaw
allow=opus
aors=8013-webrtc
auth=8013-webrtc
webrtc=yes
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
direct_media=no
ice_support=yes
dtmf_mode=rfc4733
transport=transport-wss
callerid=Agent 8013 <8013>

[8013-webrtc]
type=auth
auth_type=userpass
password=password123
username=8013

[8013-webrtc]
type=aor
max_contacts=1

; WebRTC Endpoint for Agent 8014
[8014-webrtc]
type=endpoint
context=from-internal
disallow=all
allow=ulaw
allow=alaw
allow=opus
aors=8014-webrtc
auth=8014-webrtc
webrtc=yes
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
direct_media=no
ice_support=yes
dtmf_mode=rfc4733
transport=transport-wss
callerid=Agent 8014 <8014>

[8014-webrtc]
type=auth
auth_type=userpass
password=password123
username=8014

[8014-webrtc]
type=aor
max_contacts=1

; ============================================
; SIP TRUNK (Naya Tel)
; Keep your existing trunk configuration
; ============================================

[trunk]
type=endpoint
context=from-trunk
disallow=all
allow=ulaw
allow=alaw
aors=trunk
auth=trunk
outbound_auth=trunk
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
direct_media=no

[trunk]
type=auth
auth_type=userpass
password=YOUR_NAYA_TEL_PASSWORD
username=YOUR_NAYA_TEL_USERNAME

[trunk]
type=aor
contact=sip:YOUR_NAYA_TEL_SERVER:5060
qualify_frequency=60
